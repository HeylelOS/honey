LIBHNY_SRC=$(wildcard src/libhny/*.c)
LIBHNY=$(BUILDDIR)/lib/libhny.so
HNY_SRC=$(wildcard src/hny/*.c)
HNY=$(BUILDDIR)/bin/hny

.PHONY: all clean

all: $(LIBHNY) $(HNY)

clean:
	rm -rf $(BUILDDIR)

$(BUILDDIR):
	mkdir -p $@/bin $@/lib

$(LIBHNY): $(LIBHNY_SRC) $(BUILDDIR)
	$(CC) $(CFLAGS) $(LDFLAGS) -Iinclude -shared -o $@ $(LIBHNY_SRC)

$(HNY): $(HNY_SRC) $(BUILDDIR)
	$(CC) $(CFLAGS) $(LDFLAGS) -Iinclude -L$(BUILDDIR)/lib -o $@ $(HNY_SRC) -lhny

